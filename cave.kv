#: kivy 2.0.0

<ConfirmPopup>:
    title: app.current_tab_title
    size_hint: (.5, .4)
    GridLayout:
        cols: 1
        size_hint: (1, 1)
        size: (msg.texture_size[0] + dp(48), 200)
        canvas:
            Rectangle:
                size: self.size
                pos: self.pos
            Color:
                rgb: .25, .25, .25
            BorderImage:
                pos: self.pos
                size: self.size
        Label:
            id: msg
            text: root.message
            halign: 'center'
        BoxLayout:
            size_hint_y: None
            height: '48dp'
            Button:
                text: 'Okay'
                on_press: root.okay()
            Button:
                text: 'Cancel'
                on_press: root.cancel()

<DeviceTab>:
    BoxLayout:
        id: layout_main
        orientation: 'vertical'
        BoxLayout:
            id: top_box
            orientation: 'vertical'
            size_hint: (1, .2)
            Label:
                text: root.title
                font_size: '20dp'
        BoxLayout:
            id: mid_box
            orientation: 'horizontal'
            size_hint: (1, .8)
            BoxLayout:
                id: left_mid_box
                orientation: 'vertical'
                size_hint: (.2, None)
            BoxLayout:
                id: center_mid_box
                orientation: 'vertical'
                size_hint: (.6, None)
                GridLayout:
#                    id: inputs_grid
                    id: center_mid_top_grid
                    cols: 3
                    spacing: '20dp'
                    size_hint: (1, None)
                GridLayout:
                    id: center_mid_bottom_grid
                    cols: 3
                    spacing: '10dp'
                    size_hint: (1, None)
            BoxLayout:
                id: right_mid_box
                size_hint: (.2, None)



<CommandButton>:
    Image:
        source: root.icon
        x: root.x
        y: root.y
        size: (48, 48)

<StatusBar@BoxLayout>:
    canvas.before:
        Color:
            rgb: 0.3, 0.3, 0.3
        Rectangle:
            size: self.size

<RootWidget>:
    id: root_widget
    popup: popup.__self__
    orientation: 'vertical'

    canvas.before:
        Color:
            rgb: .6, .6, .6
        Rectangle:
            size: self.size
            source: 'cave/data/images/burdick.png'

    Popup:
        message: 'Hello'
        command: None
        size_hint: (None, None)
        size: (300, 200)
        id: popup
        title: app.current_tab_title
        on_parent:
            if self.parent == root_widget: self.parent.remove_widget(self)
        Label:
            id: popup_label
            text: 'Do you want to power on this device?'
#            on_touch_down: popup.dismiss()


    ActionBar:
        ActionView:
            id: av
            ActionPrevious:
                title: app.location + ' - ' + app.current_tab_title
                on_release: app.go_home()

            ActionSeparator:

            ActionButton:
                text: 'On'
                icon: 'cave/data/images/power_on.png'
                size_hint_x: .09
                on_release: app.power_on_pressed()

            ActionSeparator:

            ActionButton:
                text: 'Off'
                icon: 'cave/data/images/power_off.png'
                size_hint_x: .09
                on_press: app.power_off_pressed()

    DeviceAccordion:
        id: accordion
        orientation: 'horizontal'

    StatusBar:
        orientation: 'vertical'
        size_hint_y: .12

        Label:
            text: app.status
        StatusActivityIndicator:
            id: sai
            time: app.time
            value: 0
